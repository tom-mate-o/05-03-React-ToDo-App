{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { getTodosFromBackend } from '../../utils/getTodosFromBackend';\nexport default function useLocalStorage(key, initialValue) {\n  _s();\n  const [todos, setTodos] = useState(() => {\n    // useState() hook in dem die ToDos gespeichert werden\n    const storedTodos = JSON.parse(localStorage.getItem(key)); // getTodos from local storage, wandelt den String in ein Array um\n    return storedTodos || initialValue; // wenn storedTodos nicht leer ist, dann gebe storedTodos zurück, sonst initialValue\n  });\n\n  useEffect(() => {\n    const todosCount = todos.length; // Annahme: Die Anzahl der To-Dos ist die Länge des Arrays\n    const localTodosCount = parseInt(localStorage.getItem('todosCount')) || 0; // Wert aus dem Local Storage lesen\n\n    if (localTodosCount === 0) {\n      console.log(\"useEffect_LocalStorage ist leer\");\n      loadTodosFromBackend();\n    }\n  }, [key, todos]);\n  useEffect(() => {\n    // useEffect() hook wird ausgeführt, wenn sich die ToDos ändern\n    localStorage.setItem(key, JSON.stringify(todos)); //setTodos to local storage, wandet das Array in einen String um\n  }, [key, todos]); // sobald sich key oder todos ändern, wird useEffect() ausgeführt\n\n  //Laden der ToDos aus der Datenbank\n  const loadTodosFromBackend = async () => {\n    try {\n      const backendTodos = await getTodosFromBackend();\n      setTodos(backendTodos);\n    } catch (error) {\n      console.log(\"Ooops, something went wrong, while loading the todos from the backend: \");\n    }\n  };\n  return [todos, setTodos]; // gibt die ToDos und die Funktion zum setzen der ToDos zurück + den Key\n}\n_s(useLocalStorage, \"PPytUowkUP4xfnQbW6iTJWJLwLo=\");","map":{"version":3,"names":["useState","useEffect","getTodosFromBackend","useLocalStorage","key","initialValue","_s","todos","setTodos","storedTodos","JSON","parse","localStorage","getItem","todosCount","length","localTodosCount","parseInt","console","log","loadTodosFromBackend","setItem","stringify","backendTodos","error"],"sources":["C:/Users/thoma/OneDrive/Dokumente/GitHub/_Fullstack-2023-2_meineProjekte/0503todoapp/todoapp/frontend/src/components/customHooks/useLocalStorage.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { getTodosFromBackend } from '../../utils/getTodosFromBackend';\r\n\r\nexport default function useLocalStorage(key, initialValue) {\r\n  const [todos, setTodos] = useState(() => { // useState() hook in dem die ToDos gespeichert werden\r\n    const storedTodos = JSON.parse(localStorage.getItem(key)); // getTodos from local storage, wandelt den String in ein Array um\r\n    return storedTodos || initialValue; // wenn storedTodos nicht leer ist, dann gebe storedTodos zurück, sonst initialValue\r\n  }); \r\n\r\n  useEffect(() => {\r\n    const todosCount = todos.length; // Annahme: Die Anzahl der To-Dos ist die Länge des Arrays\r\n    const localTodosCount = parseInt(localStorage.getItem('todosCount')) || 0; // Wert aus dem Local Storage lesen\r\n\r\n    if (localTodosCount === 0) {\r\n      console.log(\"useEffect_LocalStorage ist leer\");\r\n      loadTodosFromBackend();\r\n    }\r\n  }, [key, todos]);\r\n\r\n\r\n  useEffect(() => { // useEffect() hook wird ausgeführt, wenn sich die ToDos ändern\r\n    localStorage.setItem(key, JSON.stringify(todos)); //setTodos to local storage, wandet das Array in einen String um\r\n  }, [key, todos]); // sobald sich key oder todos ändern, wird useEffect() ausgeführt\r\n\r\n\r\n  //Laden der ToDos aus der Datenbank\r\n  const loadTodosFromBackend = async () => {\r\n    try {\r\n      const backendTodos = await getTodosFromBackend();\r\n      setTodos(backendTodos);\r\n    } catch (error) {\r\n      console.log(\"Ooops, something went wrong, while loading the todos from the backend: \");\r\n    }\r\n  };\r\n\r\n  return [todos, setTodos]; // gibt die ToDos und die Funktion zum setzen der ToDos zurück + den Key\r\n}\r\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,mBAAmB,QAAQ,iCAAiC;AAErE,eAAe,SAASC,eAAeA,CAACC,GAAG,EAAEC,YAAY,EAAE;EAAAC,EAAA;EACzD,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGR,QAAQ,CAAC,MAAM;IAAE;IACzC,MAAMS,WAAW,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAACT,GAAG,CAAC,CAAC,CAAC,CAAC;IAC3D,OAAOK,WAAW,IAAIJ,YAAY,CAAC,CAAC;EACtC,CAAC,CAAC;;EAEFJ,SAAS,CAAC,MAAM;IACd,MAAMa,UAAU,GAAGP,KAAK,CAACQ,MAAM,CAAC,CAAC;IACjC,MAAMC,eAAe,GAAGC,QAAQ,CAACL,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;;IAE3E,IAAIG,eAAe,KAAK,CAAC,EAAE;MACzBE,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC;MAC9CC,oBAAoB,CAAC,CAAC;IACxB;EACF,CAAC,EAAE,CAAChB,GAAG,EAAEG,KAAK,CAAC,CAAC;EAGhBN,SAAS,CAAC,MAAM;IAAE;IAChBW,YAAY,CAACS,OAAO,CAACjB,GAAG,EAAEM,IAAI,CAACY,SAAS,CAACf,KAAK,CAAC,CAAC,CAAC,CAAC;EACpD,CAAC,EAAE,CAACH,GAAG,EAAEG,KAAK,CAAC,CAAC,CAAC,CAAC;;EAGlB;EACA,MAAMa,oBAAoB,GAAG,MAAAA,CAAA,KAAY;IACvC,IAAI;MACF,MAAMG,YAAY,GAAG,MAAMrB,mBAAmB,CAAC,CAAC;MAChDM,QAAQ,CAACe,YAAY,CAAC;IACxB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdN,OAAO,CAACC,GAAG,CAAC,yEAAyE,CAAC;IACxF;EACF,CAAC;EAED,OAAO,CAACZ,KAAK,EAAEC,QAAQ,CAAC,CAAC,CAAC;AAC5B;AAACF,EAAA,CAjCuBH,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}